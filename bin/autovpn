#!/bin/bash
while [ "true" ]
do
    if (! nmcli con status | cut -c 95-97 | grep -q yes ) then
        if (! nmcli con status | cut -c 95-97 | grep -q yes ) then
            echo "Disconnected, trying to reconnect..."
            CONNAME=`nmcli con | grep -v never | grep vpn -m 1 | cut -c 27-62`
            nmcli con up uuid $CONNAME
        fi
    fi
    sleep 5
done

